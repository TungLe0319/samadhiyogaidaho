import{A as R,l as T,x as U}from"./index.18a47402.js";var E=function(a,o){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},E(a,o)};function p(a,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function t(){this.constructor=a}E(a,o),a.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}var A=function(){return A=Object.assign||function(a){for(var o,t=1,n=arguments.length;t<n;t++)for(var i in o=arguments[t])Object.prototype.hasOwnProperty.call(o,i)&&(a[i]=o[i]);return a},A.apply(this,arguments)};function f(a,o,t,n){return new(t||(t=Promise))(function(i,r){function s(d){try{u(n.next(d))}catch(l){r(l)}}function c(d){try{u(n.throw(d))}catch(l){r(l)}}function u(d){var l;d.done?i(d.value):(l=d.value,l instanceof t?l:new t(function(h){h(l)})).then(s,c)}u((n=n.apply(a,o||[])).next())})}function v(a,o){var t,n,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function c(u){return function(d){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,n=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||l[0]!==6&&l[0]!==2)){s=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){s.label=l[1];break}if(l[0]===6&&s.label<i[1]){s.label=i[1],i=l;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(l);break}i[2]&&s.ops.pop(),s.trys.pop();continue}l=o.call(a,s)}catch(h){l=[6,h],n=0}finally{t=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,d])}}}var G,O=function(a){function o(t){var n,i=this;return(i=a.call(this,"ClientResponseError")||this).url="",i.status=0,i.data={},i.isAbort=!1,i.originalError=null,Object.setPrototypeOf(i,o.prototype),t instanceof o||(i.originalError=t),t!==null&&typeof t=="object"&&(i.url=typeof t.url=="string"?t.url:"",i.status=typeof t.status=="number"?t.status:0,i.data=t.data!==null&&typeof t.data=="object"?t.data:{}),typeof DOMException<"u"&&t instanceof DOMException&&(i.isAbort=!0),i.name="ClientResponseError "+i.status,i.message=(n=i.data)===null||n===void 0?void 0:n.message,i.message||(i.message=i.isAbort?"The request was autocancelled. More info you could find in https://github.com/pocketbase/js-sdk#auto-cancellation.":"Something went wrong while processing your request."),i}return p(o,a),o.prototype.toJSON=function(){return A({},this)},o}(Error),k=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function N(a,o,t){var n=Object.assign({},t||{}),i=n.encode||J;if(!k.test(a))throw new TypeError("argument name is invalid");var r=i(o);if(r&&!k.test(r))throw new TypeError("argument val is invalid");var s=a+"="+r;if(n.maxAge!=null){var c=n.maxAge-0;if(isNaN(c)||!isFinite(c))throw new TypeError("option maxAge is invalid");s+="; Max-Age="+Math.floor(c)}if(n.domain){if(!k.test(n.domain))throw new TypeError("option domain is invalid");s+="; Domain="+n.domain}if(n.path){if(!k.test(n.path))throw new TypeError("option path is invalid");s+="; Path="+n.path}if(n.expires){if(!function(u){return Object.prototype.toString.call(u)==="[object Date]"||u instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");s+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(s+="; HttpOnly"),n.secure&&(s+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s}function B(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function J(a){return encodeURIComponent(a)}function F(a){if(a)try{var o=decodeURIComponent(G(a.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)||{}}catch{}return{}}G=typeof atob=="function"?atob:function(a){var o=String(a).replace(/=+$/,"");if(o.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,r=0,s="";n=o.charAt(r++);~n&&(t=i%4?64*t+n:n,i++%4)?s+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return s};var P=function(){function a(o){o===void 0&&(o={}),this.load(o||{})}return a.prototype.load=function(o){for(var t=0,n=Object.entries(o);t<n.length;t++){var i=n[t],r=i[0],s=i[1];this[r]=s}this.id=o.id!==void 0?o.id:"",this.created=o.created!==void 0?o.created:"",this.updated=o.updated!==void 0?o.updated:""},Object.defineProperty(a.prototype,"isNew",{get:function(){return!this.id},enumerable:!1,configurable:!0}),a.prototype.clone=function(){return new this.constructor(JSON.parse(JSON.stringify(this)))},a.prototype.export=function(){return Object.assign({},this)},a}(),j=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.load=function(t){a.prototype.load.call(this,t),this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.collectionName=typeof t.collectionName=="string"?t.collectionName:"",this.expand=typeof t.expand=="object"&&t.expand!==null?t.expand:{}},o}(P),x=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.load=function(t){a.prototype.load.call(this,t),this.avatar=typeof t.avatar=="number"?t.avatar:0,this.email=typeof t.email=="string"?t.email:""},o}(P),K=function(){function a(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}return Object.defineProperty(a.prototype,"token",{get:function(){return this.baseToken},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"model",{get:function(){return this.baseModel},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isValid",{get:function(){return!function(o,t){t===void 0&&(t=0);var n=F(o);return!(Object.keys(n).length>0&&(!n.exp||n.exp-t>Date.now()/1e3))}(this.token)},enumerable:!1,configurable:!0}),a.prototype.save=function(o,t){this.baseToken=o||"",this.baseModel=t!==null&&typeof t=="object"?t.collectionId!==void 0?new j(t):new x(t):null,this.triggerChange()},a.prototype.clear=function(){this.baseToken="",this.baseModel=null,this.triggerChange()},a.prototype.loadFromCookie=function(o,t){t===void 0&&(t="pb_auth");var n=function(r,s){var c={};if(typeof r!="string")return c;for(var u=Object.assign({},s||{}).decode||B,d=0;d<r.length;){var l=r.indexOf("=",d);if(l===-1)break;var h=r.indexOf(";",d);if(h===-1)h=r.length;else if(h<l){d=r.lastIndexOf(";",l-1)+1;continue}var y=r.slice(d,l).trim();if(c[y]===void 0){var m=r.slice(l+1,h).trim();m.charCodeAt(0)===34&&(m=m.slice(1,-1));try{c[y]=u(m)}catch{c[y]=m}}d=h+1}return c}(o||"")[t]||"",i={};try{(typeof(i=JSON.parse(n))===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)},a.prototype.exportToCookie=function(o,t){var n,i,r;t===void 0&&(t="pb_auth");var s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},c=F(this.token);c!=null&&c.exp?s.expires=new Date(1e3*c.exp):s.expires=new Date("1970-01-01"),o=Object.assign({},s,o);var u={token:this.token,model:((n=this.model)===null||n===void 0?void 0:n.export())||null},d=N(t,JSON.stringify(u),o),l=typeof Blob<"u"?new Blob([d]).size:d.length;return u.model&&l>4096&&(u.model={id:(i=u==null?void 0:u.model)===null||i===void 0?void 0:i.id,email:(r=u==null?void 0:u.model)===null||r===void 0?void 0:r.email},this.model instanceof j&&(u.model.username=this.model.username,u.model.verified=this.model.verified,u.model.collectionId=this.model.collectionId),d=N(t,JSON.stringify(u),o)),d},a.prototype.onChange=function(o,t){var n=this;return t===void 0&&(t=!1),this._onChangeCallbacks.push(o),t&&o(this.token,this.model),function(){for(var i=n._onChangeCallbacks.length-1;i>=0;i--)if(n._onChangeCallbacks[i]==o)return delete n._onChangeCallbacks[i],void n._onChangeCallbacks.splice(i,1)}},a.prototype.triggerChange=function(){for(var o=0,t=this._onChangeCallbacks;o<t.length;o++){var n=t[o];n&&n(this.token,this.model)}},a}(),H=function(a){function o(t){t===void 0&&(t="pocketbase_auth");var n=a.call(this)||this;return n.storageFallback={},n.storageKey=t,n}return p(o,a),Object.defineProperty(o.prototype,"token",{get:function(){return(this._storageGet(this.storageKey)||{}).token||""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"model",{get:function(){var t,n=this._storageGet(this.storageKey)||{};return n===null||typeof n!="object"||n.model===null||typeof n.model!="object"?null:((t=n.model)===null||t===void 0?void 0:t.collectionId)===void 0?new x(n.model):new j(n.model)},enumerable:!1,configurable:!0}),o.prototype.save=function(t,n){this._storageSet(this.storageKey,{token:t,model:n}),a.prototype.save.call(this,t,n)},o.prototype.clear=function(){this._storageRemove(this.storageKey),a.prototype.clear.call(this)},o.prototype._storageGet=function(t){if(typeof window<"u"&&(window==null?void 0:window.localStorage)){var n=window.localStorage.getItem(t)||"";try{return JSON.parse(n)}catch{return n}}return this.storageFallback[t]},o.prototype._storageSet=function(t,n){if(typeof window<"u"&&(window==null?void 0:window.localStorage)){var i=n;typeof n!="string"&&(i=JSON.stringify(n)),window.localStorage.setItem(t,i)}else this.storageFallback[t]=n},o.prototype._storageRemove=function(t){var n;typeof window<"u"&&(window==null?void 0:window.localStorage)&&((n=window.localStorage)===null||n===void 0||n.removeItem(t)),delete this.storageFallback[t]},o}(K),I=function(a){this.client=a},$=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.getAll=function(t){return t===void 0&&(t={}),this.client.send("/api/settings",{method:"GET",params:t}).then(function(n){return n||{}})},o.prototype.update=function(t,n){return t===void 0&&(t={}),n===void 0&&(n={}),this.client.send("/api/settings",{method:"PATCH",params:n,body:t}).then(function(i){return i||{}})},o.prototype.testS3=function(t){return t===void 0&&(t={}),this.client.send("/api/settings/test/s3",{method:"POST",params:t}).then(function(){return!0})},o.prototype.testEmail=function(t,n,i){i===void 0&&(i={});var r={email:t,template:n};return this.client.send("/api/settings/test/email",{method:"POST",params:i,body:r}).then(function(){return!0})},o}(I),M=function(a,o,t,n,i){this.page=a>0?a:1,this.perPage=o>=0?o:0,this.totalItems=t>=0?t:0,this.totalPages=n>=0?n:0,this.items=i||[]},L=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.getFullList=function(t,n){return t===void 0&&(t=200),n===void 0&&(n={}),this._getFullList(this.baseCrudPath,t,n)},o.prototype.getList=function(t,n,i){return t===void 0&&(t=1),n===void 0&&(n=30),i===void 0&&(i={}),this._getList(this.baseCrudPath,t,n,i)},o.prototype.getFirstListItem=function(t,n){return n===void 0&&(n={}),this._getFirstListItem(this.baseCrudPath,t,n)},o.prototype.getOne=function(t,n){return n===void 0&&(n={}),this._getOne(this.baseCrudPath,t,n)},o.prototype.create=function(t,n){return t===void 0&&(t={}),n===void 0&&(n={}),this._create(this.baseCrudPath,t,n)},o.prototype.update=function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),this._update(this.baseCrudPath,t,n,i)},o.prototype.delete=function(t,n){return n===void 0&&(n={}),this._delete(this.baseCrudPath,t,n)},o}(function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype._getFullList=function(t,n,i){var r=this;n===void 0&&(n=100),i===void 0&&(i={});var s=[],c=function(u){return f(r,void 0,void 0,function(){return v(this,function(d){return[2,this._getList(t,u,n,i).then(function(l){var h=l,y=h.items,m=h.totalItems;return s=s.concat(y),y.length&&m>s.length?c(u+1):s})]})})};return c(1)},o.prototype._getList=function(t,n,i,r){var s=this;return n===void 0&&(n=1),i===void 0&&(i=30),r===void 0&&(r={}),r=Object.assign({page:n,perPage:i},r),this.client.send(t,{method:"GET",params:r}).then(function(c){var u=[];if(c!=null&&c.items){c.items=c.items||[];for(var d=0,l=c.items;d<l.length;d++){var h=l[d];u.push(s.decode(h))}}return new M((c==null?void 0:c.page)||1,(c==null?void 0:c.perPage)||0,(c==null?void 0:c.totalItems)||0,(c==null?void 0:c.totalPages)||0,u)})},o.prototype._getOne=function(t,n,i){var r=this;return i===void 0&&(i={}),this.client.send(t+"/"+encodeURIComponent(n),{method:"GET",params:i}).then(function(s){return r.decode(s)})},o.prototype._getFirstListItem=function(t,n,i){return i===void 0&&(i={}),i=Object.assign({filter:n,$cancelKey:"one_by_filter_"+t+"_"+n},i),this._getList(t,1,1,i).then(function(r){var s;if(!(!((s=r==null?void 0:r.items)===null||s===void 0)&&s.length))throw new O({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return r.items[0]})},o.prototype._create=function(t,n,i){var r=this;return n===void 0&&(n={}),i===void 0&&(i={}),this.client.send(t,{method:"POST",params:i,body:n}).then(function(s){return r.decode(s)})},o.prototype._update=function(t,n,i,r){var s=this;return i===void 0&&(i={}),r===void 0&&(r={}),this.client.send(t+"/"+encodeURIComponent(n),{method:"PATCH",params:r,body:i}).then(function(c){return s.decode(c)})},o.prototype._delete=function(t,n,i){return i===void 0&&(i={}),this.client.send(t+"/"+encodeURIComponent(n),{method:"DELETE",params:i}).then(function(){return!0})},o}(I)),z=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.decode=function(t){return new x(t)},Object.defineProperty(o.prototype,"baseCrudPath",{get:function(){return"/api/admins"},enumerable:!1,configurable:!0}),o.prototype.update=function(t,n,i){var r=this;return n===void 0&&(n={}),i===void 0&&(i={}),a.prototype.update.call(this,t,n,i).then(function(s){var c,u;return r.client.authStore.model&&((c=r.client.authStore.model)===null||c===void 0?void 0:c.collectionId)===void 0&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},o.prototype.delete=function(t,n){var i=this;return n===void 0&&(n={}),a.prototype.delete.call(this,t,n).then(function(r){var s,c;return r&&i.client.authStore.model&&((s=i.client.authStore.model)===null||s===void 0?void 0:s.collectionId)===void 0&&((c=i.client.authStore.model)===null||c===void 0?void 0:c.id)===t&&i.client.authStore.clear(),r})},o.prototype.authResponse=function(t){var n=this.decode((t==null?void 0:t.admin)||{});return(t==null?void 0:t.token)&&(t==null?void 0:t.admin)&&this.client.authStore.save(t.token,n),Object.assign({},t,{token:(t==null?void 0:t.token)||"",admin:n})},o.prototype.authWithPassword=function(t,n,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({identity:t,password:n},i),this.client.send(this.baseCrudPath+"/auth-with-password",{method:"POST",params:r,body:i,headers:{Authorization:""}}).then(this.authResponse.bind(this))},o.prototype.authRefresh=function(t,n){return t===void 0&&(t={}),n===void 0&&(n={}),this.client.send(this.baseCrudPath+"/auth-refresh",{method:"POST",params:n,body:t}).then(this.authResponse.bind(this))},o.prototype.requestPasswordReset=function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),n=Object.assign({email:t},n),this.client.send(this.baseCrudPath+"/request-password-reset",{method:"POST",params:i,body:n}).then(function(){return!0})},o.prototype.confirmPasswordReset=function(t,n,i,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:n,passwordConfirm:i},r),this.client.send(this.baseCrudPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},o}(L),W=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.load=function(t){a.prototype.load.call(this,t),this.recordId=typeof t.recordId=="string"?t.recordId:"",this.collectionId=typeof t.collectionId=="string"?t.collectionId:"",this.provider=typeof t.provider=="string"?t.provider:"",this.providerId=typeof t.providerId=="string"?t.providerId:""},o}(P),V=function(a){function o(t,n){var i=a.call(this,t)||this;return i.collectionIdOrName=n,i}return p(o,a),o.prototype.decode=function(t){return new j(t)},Object.defineProperty(o.prototype,"baseCrudPath",{get:function(){return this.baseCollectionPath+"/records"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"baseCollectionPath",{get:function(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)},enumerable:!1,configurable:!0}),o.prototype.subscribeOne=function(t,n){return f(this,void 0,void 0,function(){return v(this,function(i){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName+"/"+t,n)]})})},o.prototype.subscribe=function(t,n){return f(this,void 0,void 0,function(){var i;return v(this,function(r){if(typeof t=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),[2,this.client.realtime.subscribe(this.collectionIdOrName,t)];if(!n)throw new Error("Missing subscription callback.");if(t==="")throw new Error("Missing topic.");return i=this.collectionIdOrName,t!=="*"&&(i+="/"+t),[2,this.client.realtime.subscribe(i,n)]})})},o.prototype.unsubscribe=function(t){return f(this,void 0,void 0,function(){return v(this,function(n){return t==="*"?[2,this.client.realtime.unsubscribe(this.collectionIdOrName)]:t?[2,this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+t)]:[2,this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)]})})},o.prototype.getFullList=function(t,n){return t===void 0&&(t=200),n===void 0&&(n={}),a.prototype.getFullList.call(this,t,n)},o.prototype.getList=function(t,n,i){return t===void 0&&(t=1),n===void 0&&(n=30),i===void 0&&(i={}),a.prototype.getList.call(this,t,n,i)},o.prototype.getFirstListItem=function(t,n){return n===void 0&&(n={}),a.prototype.getFirstListItem.call(this,t,n)},o.prototype.getOne=function(t,n){return n===void 0&&(n={}),a.prototype.getOne.call(this,t,n)},o.prototype.create=function(t,n){return t===void 0&&(t={}),n===void 0&&(n={}),a.prototype.create.call(this,t,n)},o.prototype.update=function(t,n,i){var r=this;return n===void 0&&(n={}),i===void 0&&(i={}),a.prototype.update.call(this,t,n,i).then(function(s){var c,u;return((c=r.client.authStore.model)===null||c===void 0?void 0:c.collectionId)!==void 0&&((u=r.client.authStore.model)===null||u===void 0?void 0:u.id)===(s==null?void 0:s.id)&&r.client.authStore.save(r.client.authStore.token,s),s})},o.prototype.delete=function(t,n){var i=this;return n===void 0&&(n={}),a.prototype.delete.call(this,t,n).then(function(r){var s,c;return r&&((s=i.client.authStore.model)===null||s===void 0?void 0:s.collectionId)!==void 0&&((c=i.client.authStore.model)===null||c===void 0?void 0:c.id)===t&&i.client.authStore.clear(),r})},o.prototype.authResponse=function(t){var n=this.decode((t==null?void 0:t.record)||{});return this.client.authStore.save(t==null?void 0:t.token,n),Object.assign({},t,{token:(t==null?void 0:t.token)||"",record:n})},o.prototype.listAuthMethods=function(t){return t===void 0&&(t={}),this.client.send(this.baseCollectionPath+"/auth-methods",{method:"GET",params:t}).then(function(n){return Object.assign({},n,{usernamePassword:!!(n!=null&&n.usernamePassword),emailPassword:!!(n!=null&&n.emailPassword),authProviders:Array.isArray(n==null?void 0:n.authProviders)?n==null?void 0:n.authProviders:[]})})},o.prototype.authWithPassword=function(t,n,i,r){var s=this;return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({identity:t,password:n},i),this.client.send(this.baseCollectionPath+"/auth-with-password",{method:"POST",params:r,body:i,headers:{Authorization:""}}).then(function(c){return s.authResponse(c)})},o.prototype.authWithOAuth2=function(t,n,i,r,s,c,u){var d=this;return s===void 0&&(s={}),c===void 0&&(c={}),u===void 0&&(u={}),c=Object.assign({provider:t,code:n,codeVerifier:i,redirectUrl:r,createData:s},c),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",{method:"POST",params:u,body:c}).then(function(l){return d.authResponse(l)})},o.prototype.authRefresh=function(t,n){var i=this;return t===void 0&&(t={}),n===void 0&&(n={}),this.client.send(this.baseCollectionPath+"/auth-refresh",{method:"POST",params:n,body:t}).then(function(r){return i.authResponse(r)})},o.prototype.requestPasswordReset=function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),n=Object.assign({email:t},n),this.client.send(this.baseCollectionPath+"/request-password-reset",{method:"POST",params:i,body:n}).then(function(){return!0})},o.prototype.confirmPasswordReset=function(t,n,i,r,s){return r===void 0&&(r={}),s===void 0&&(s={}),r=Object.assign({token:t,password:n,passwordConfirm:i},r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",{method:"POST",params:s,body:r}).then(function(){return!0})},o.prototype.requestVerification=function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),n=Object.assign({email:t},n),this.client.send(this.baseCollectionPath+"/request-verification",{method:"POST",params:i,body:n}).then(function(){return!0})},o.prototype.confirmVerification=function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),n=Object.assign({token:t},n),this.client.send(this.baseCollectionPath+"/confirm-verification",{method:"POST",params:i,body:n}).then(function(){return!0})},o.prototype.requestEmailChange=function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),n=Object.assign({newEmail:t},n),this.client.send(this.baseCollectionPath+"/request-email-change",{method:"POST",params:i,body:n}).then(function(){return!0})},o.prototype.confirmEmailChange=function(t,n,i,r){return i===void 0&&(i={}),r===void 0&&(r={}),i=Object.assign({token:t,password:n},i),this.client.send(this.baseCollectionPath+"/confirm-email-change",{method:"POST",params:r,body:i}).then(function(){return!0})},o.prototype.listExternalAuths=function(t,n){return n===void 0&&(n={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths",{method:"GET",params:n}).then(function(i){var r=[];if(Array.isArray(i))for(var s=0,c=i;s<c.length;s++){var u=c[s];r.push(new W(u))}return r})},o.prototype.unlinkExternalAuth=function(t,n,i){return i===void 0&&(i={}),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(t)+"/external-auths/"+encodeURIComponent(n),{method:"DELETE",params:i}).then(function(){return!0})},o}(L),Q=function(){function a(o){o===void 0&&(o={}),this.load(o||{})}return a.prototype.load=function(o){this.id=o.id!==void 0?o.id:"",this.name=o.name!==void 0?o.name:"",this.type=o.type!==void 0?o.type:"text",this.system=!!o.system,this.required=!!o.required,this.unique=!!o.unique,this.options=typeof o.options=="object"&&o.options!==null?o.options:{}},a}(),Y=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.load=function(t){a.prototype.load.call(this,t),this.system=!!t.system,this.name=typeof t.name=="string"?t.name:"",this.type=typeof t.type=="string"?t.type:"base",this.options=t.options!==void 0?t.options:{},this.listRule=typeof t.listRule=="string"?t.listRule:null,this.viewRule=typeof t.viewRule=="string"?t.viewRule:null,this.createRule=typeof t.createRule=="string"?t.createRule:null,this.updateRule=typeof t.updateRule=="string"?t.updateRule:null,this.deleteRule=typeof t.deleteRule=="string"?t.deleteRule:null,t.schema=Array.isArray(t.schema)?t.schema:[],this.schema=[];for(var n=0,i=t.schema;n<i.length;n++){var r=i[n];this.schema.push(new Q(r))}},Object.defineProperty(o.prototype,"isBase",{get:function(){return this.type==="base"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isAuth",{get:function(){return this.type==="auth"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isSingle",{get:function(){return this.type==="single"},enumerable:!1,configurable:!0}),o}(P),X=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.decode=function(t){return new Y(t)},Object.defineProperty(o.prototype,"baseCrudPath",{get:function(){return"/api/collections"},enumerable:!1,configurable:!0}),o.prototype.import=function(t,n,i){return n===void 0&&(n=!1),i===void 0&&(i={}),f(this,void 0,void 0,function(){return v(this,function(r){return[2,this.client.send(this.baseCrudPath+"/import",{method:"PUT",params:i,body:{collections:t,deleteMissing:n}}).then(function(){return!0})]})})},o}(L),q=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.load=function(t){a.prototype.load.call(this,t),t.remoteIp=t.remoteIp||t.ip,this.url=typeof t.url=="string"?t.url:"",this.method=typeof t.method=="string"?t.method:"GET",this.status=typeof t.status=="number"?t.status:200,this.auth=typeof t.auth=="string"?t.auth:"guest",this.remoteIp=typeof t.remoteIp=="string"?t.remoteIp:"",this.userIp=typeof t.userIp=="string"?t.userIp:"",this.referer=typeof t.referer=="string"?t.referer:"",this.userAgent=typeof t.userAgent=="string"?t.userAgent:"",this.meta=typeof t.meta=="object"&&t.meta!==null?t.meta:{}},o}(P),Z=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.getRequestsList=function(t,n,i){return t===void 0&&(t=1),n===void 0&&(n=30),i===void 0&&(i={}),i=Object.assign({page:t,perPage:n},i),this.client.send("/api/logs/requests",{method:"GET",params:i}).then(function(r){var s=[];if(r!=null&&r.items){r.items=(r==null?void 0:r.items)||[];for(var c=0,u=r.items;c<u.length;c++){var d=u[c];s.push(new q(d))}}return new M((r==null?void 0:r.page)||1,(r==null?void 0:r.perPage)||0,(r==null?void 0:r.totalItems)||0,(r==null?void 0:r.totalPages)||0,s)})},o.prototype.getRequest=function(t,n){return n===void 0&&(n={}),this.client.send("/api/logs/requests/"+encodeURIComponent(t),{method:"GET",params:n}).then(function(i){return new q(i)})},o.prototype.getRequestsStats=function(t){return t===void 0&&(t={}),this.client.send("/api/logs/requests/stats",{method:"GET",params:t}).then(function(n){return n})},o}(I),tt=function(a){function o(){var t=a!==null&&a.apply(this,arguments)||this;return t.clientId="",t.eventSource=null,t.subscriptions={},t.lastSentTopics=[],t.maxConnectTimeout=1e4,t.reconnectAttempts=0,t.maxReconnectAttempts=1/0,t.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],t.pendingConnects=[],t}return p(o,a),Object.defineProperty(o.prototype,"isConnected",{get:function(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length},enumerable:!1,configurable:!0}),o.prototype.subscribe=function(t,n){var i;return f(this,void 0,void 0,function(){var r,s=this;return v(this,function(c){switch(c.label){case 0:if(!t)throw new Error("topic must be set.");return r=function(u){var d,l=u;try{d=JSON.parse(l==null?void 0:l.data)}catch{}n(d||{})},this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(r),this.isConnected?[3,2]:[4,this.connect()];case 1:return c.sent(),[3,5];case 2:return this.subscriptions[t].length!==1?[3,4]:[4,this.submitSubscriptions()];case 3:return c.sent(),[3,5];case 4:(i=this.eventSource)===null||i===void 0||i.addEventListener(t,r),c.label=5;case 5:return[2,function(){return f(s,void 0,void 0,function(){return v(this,function(u){return[2,this.unsubscribeByTopicAndListener(t,r)]})})}]}})})},o.prototype.unsubscribe=function(t){var n;return f(this,void 0,void 0,function(){var i,r,s;return v(this,function(c){switch(c.label){case 0:if(!this.hasSubscriptionListeners(t))return[2];if(t){for(i=0,r=this.subscriptions[t];i<r.length;i++)s=r[i],(n=this.eventSource)===null||n===void 0||n.removeEventListener(t,s);delete this.subscriptions[t]}else this.subscriptions={};return this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3]);case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:c.sent(),c.label=3;case 3:return[2]}})})},o.prototype.unsubscribeByPrefix=function(t){var n;return f(this,void 0,void 0,function(){var i,r,s,c,u;return v(this,function(d){switch(d.label){case 0:for(r in i=!1,this.subscriptions)if(r.startsWith(t)){for(i=!0,s=0,c=this.subscriptions[r];s<c.length;s++)u=c[s],(n=this.eventSource)===null||n===void 0||n.removeEventListener(r,u);delete this.subscriptions[r]}return i?this.hasSubscriptionListeners()?[4,this.submitSubscriptions()]:[3,2]:[2];case 1:return d.sent(),[3,3];case 2:this.disconnect(),d.label=3;case 3:return[2]}})})},o.prototype.unsubscribeByTopicAndListener=function(t,n){var i;return f(this,void 0,void 0,function(){var r,s;return v(this,function(c){switch(c.label){case 0:if(!Array.isArray(this.subscriptions[t])||!this.subscriptions[t].length)return[2];for(r=!1,s=this.subscriptions[t].length-1;s>=0;s--)this.subscriptions[t][s]===n&&(r=!0,delete this.subscriptions[t][s],this.subscriptions[t].splice(s,1),(i=this.eventSource)===null||i===void 0||i.removeEventListener(t,n));return r?(this.subscriptions[t].length||delete this.subscriptions[t],this.hasSubscriptionListeners()?[3,1]:(this.disconnect(),[3,3])):[2];case 1:return this.hasSubscriptionListeners(t)?[3,3]:[4,this.submitSubscriptions()];case 2:c.sent(),c.label=3;case 3:return[2]}})})},o.prototype.hasSubscriptionListeners=function(t){var n,i;if(this.subscriptions=this.subscriptions||{},t)return!!(!((n=this.subscriptions[t])===null||n===void 0)&&n.length);for(var r in this.subscriptions)if(!((i=this.subscriptions[r])===null||i===void 0)&&i.length)return!0;return!1},o.prototype.submitSubscriptions=function(){return f(this,void 0,void 0,function(){return v(this,function(t){return this.clientId?(this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),[2,this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},params:{$cancelKey:"realtime_"+this.clientId}}).catch(function(n){if(!(n!=null&&n.isAbort))throw n})]):[2]})})},o.prototype.getNonEmptySubscriptionTopics=function(){var t=[];for(var n in this.subscriptions)this.subscriptions[n].length&&t.push(n);return t},o.prototype.addAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.removeAllSubscriptionListeners(),this.subscriptions)for(var n=0,i=this.subscriptions[t];n<i.length;n++){var r=i[n];this.eventSource.addEventListener(t,r)}},o.prototype.removeAllSubscriptionListeners=function(){if(this.eventSource)for(var t in this.subscriptions)for(var n=0,i=this.subscriptions[t];n<i.length;n++){var r=i[n];this.eventSource.removeEventListener(t,r)}},o.prototype.connect=function(){return f(this,void 0,void 0,function(){var t=this;return v(this,function(n){return this.reconnectAttempts>0?[2]:[2,new Promise(function(i,r){t.pendingConnects.push({resolve:i,reject:r}),t.pendingConnects.length>1||t.initConnect()})]})})},o.prototype.initConnect=function(){var t=this;this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(function(){t.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=function(n){t.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",function(n){var i=n;t.clientId=i==null?void 0:i.lastEventId,t.submitSubscriptions().then(function(){return f(t,void 0,void 0,function(){var r;return v(this,function(s){switch(s.label){case 0:r=3,s.label=1;case 1:return this.hasUnsentSubscriptions()&&r>0?(r--,[4,this.submitSubscriptions()]):[3,3];case 2:return s.sent(),[3,1];case 3:return[2]}})})}).then(function(){for(var r=0,s=t.pendingConnects;r<s.length;r++)s[r].resolve();t.pendingConnects=[],t.reconnectAttempts=0,clearTimeout(t.reconnectTimeoutId),clearTimeout(t.connectTimeoutId)}).catch(function(r){t.clientId="",t.connectErrorHandler(r)})})},o.prototype.hasUnsentSubscriptions=function(){var t=this.getNonEmptySubscriptionTopics();if(t.length!=this.lastSentTopics.length)return!0;for(var n=0,i=t;n<i.length;n++){var r=i[n];if(!this.lastSentTopics.includes(r))return!0}return!1},o.prototype.connectErrorHandler=function(t){var n=this;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(var i=0,r=this.pendingConnects;i<r.length;i++)r[i].reject(new O(t));this.disconnect()}else{this.disconnect(!0);var s=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(function(){n.initConnect()},s)}},o.prototype.disconnect=function(t){var n;if(t===void 0&&(t=!1),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),(n=this.eventSource)===null||n===void 0||n.close(),this.eventSource=null,this.clientId="",!t){this.reconnectAttempts=0;for(var i=new O(new Error("Realtime disconnected.")),r=0,s=this.pendingConnects;r<s.length;r++)s[r].reject(i);this.pendingConnects=[]}},o}(I),et=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return p(o,a),o.prototype.check=function(t){return t===void 0&&(t={}),this.client.send("/api/health",{method:"GET",params:t})},o}(I),nt=function(){function a(o,t,n){o===void 0&&(o="/"),n===void 0&&(n="en-US"),this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=o,this.lang=n,this.authStore=t||new H,this.admins=new z(this),this.collections=new X(this),this.logs=new Z(this),this.settings=new $(this),this.realtime=new tt(this),this.health=new et(this)}return a.prototype.collection=function(o){return this.recordServices[o]||(this.recordServices[o]=new V(this,o)),this.recordServices[o]},a.prototype.autoCancellation=function(o){return this.enableAutoCancellation=!!o,this},a.prototype.cancelRequest=function(o){return this.cancelControllers[o]&&(this.cancelControllers[o].abort(),delete this.cancelControllers[o]),this},a.prototype.cancelAllRequests=function(){for(var o in this.cancelControllers)this.cancelControllers[o].abort();return this.cancelControllers={},this},a.prototype.send=function(o,t){var n,i,r,s,c,u,d,l;return f(this,void 0,void 0,function(){var h,y,m,w,_,D=this;return v(this,function(rt){return(h=Object.assign({method:"GET"},t)).body&&h.body.constructor.name!=="FormData"&&(typeof h.body!="string"&&(h.body=JSON.stringify(h.body)),((n=h==null?void 0:h.headers)===null||n===void 0?void 0:n["Content-Type"])===void 0&&(h.headers=Object.assign({},h.headers,{"Content-Type":"application/json"}))),((i=h==null?void 0:h.headers)===null||i===void 0?void 0:i["Accept-Language"])===void 0&&(h.headers=Object.assign({},h.headers,{"Accept-Language":this.lang})),((r=this.authStore)===null||r===void 0?void 0:r.token)&&((s=h==null?void 0:h.headers)===null||s===void 0?void 0:s.Authorization)===void 0&&(h.headers=Object.assign({},h.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&((c=h.params)===null||c===void 0?void 0:c.$autoCancel)!==!1&&(y=((u=h.params)===null||u===void 0?void 0:u.$cancelKey)||(h.method||"GET")+o,this.cancelRequest(y),m=new AbortController,this.cancelControllers[y]=m,h.signal=m.signal),(d=h.params)===null||d===void 0||delete d.$autoCancel,(l=h.params)===null||l===void 0||delete l.$cancelKey,w=this.buildUrl(o),h.params!==void 0&&((_=this.serializeQueryParams(h.params))&&(w+=(w.includes("?")?"&":"?")+_),delete h.params),this.beforeSend&&(h=Object.assign({},this.beforeSend(w,h))),[2,fetch(w,h).then(function(g){return f(D,void 0,void 0,function(){var S;return v(this,function(C){switch(C.label){case 0:S={},C.label=1;case 1:return C.trys.push([1,3,,4]),[4,g.json()];case 2:return S=C.sent(),[3,4];case 3:return C.sent(),[3,4];case 4:if(this.afterSend&&(S=this.afterSend(g,S)),g.status>=400)throw new O({url:g.url,status:g.status,data:S});return[2,S]}})})}).catch(function(g){throw new O(g)})]})})},a.prototype.getFileUrl=function(o,t,n){n===void 0&&(n={});var i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(o.collectionId||o.collectionName)),i.push(encodeURIComponent(o.id)),i.push(encodeURIComponent(t));var r=this.buildUrl(i.join("/"));if(Object.keys(n).length){var s=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+s}return r},a.prototype.buildUrl=function(o){var t=this.baseUrl+(this.baseUrl.endsWith("/")?"":"/");return o&&(t+=o.startsWith("/")?o.substring(1):o),t},a.prototype.serializeQueryParams=function(o){var t=[];for(var n in o)if(o[n]!==null){var i=o[n],r=encodeURIComponent(n);if(Array.isArray(i))for(var s=0,c=i;s<c.length;s++){var u=c[s];t.push(r+"="+encodeURIComponent(u))}else i instanceof Date?t.push(r+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(i))):t.push(r+"="+encodeURIComponent(i))}return t.join("&")},a}();const it="https://pocket.services.samadhiyogaidaho.com",b=new nt(it);R.admin=async()=>await b.admins.authWithPassword("daniel97.le@gmail.com","2MSOBk4SXEY4yYuhsxuQ3atZiVSaShtE");class ot{async getFiles(){const o=await b.collection("images").getFullList();T.log(o)}async uploadFile(o){const t=[],n=Array.from(o.target.files);for await(const i of n){let r=new FormData;r.append("file",i);const s=await this.createFile(r),c=await b.getFileUrl(s,s.file);await b.collection("images").update(s.id,{url:c}),t.push(c)}return T.log(t),t}async createFile(o){try{return await b.collection("images").create(o)}catch{U.error(e,"please contact an admin")}}async getPastRetreats(){(await b.collection("aug22Retreat").getFullList()).forEach(t=>R.aug22RetreatImages.push(t.url)),T.log(R.aug22RetreatImages)}async createCollection(){R.admin;const o=await b.collections.getOne("aug22Retreat"),t=await b.collections.create({name:"aug25Retreat",type:o.type,schema:o.schema});T.log(t)}async transferToMongo(){await U.confirm()}}const at=new ot;export{at as pocketBaseService};
